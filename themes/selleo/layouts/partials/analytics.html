{{ if not (in (.Site.BaseURL | string) "localhost") }}
<script type="text/javascript">
    (function (f, b) {
        if (!b.__SV) {
            var e, g, i, h; window.mixpanel = b; b._i = []; b.init = function (e, f, c) {
                function g(a, d) {var b = d.split("."); 2 == b.length && (a = a[b[0]], d = b[1]); a[d] = function () {a.push([d].concat(Array.prototype.slice.call(arguments, 0)))}} var a = b; "undefined" !== typeof c ? a = b[c] = [] : c = "mixpanel"; a.people = a.people || []; a.toString = function (a) {var d = "mixpanel"; "mixpanel" !== c && (d += "." + c); a || (d += " (stub)"); return d}; a.people.toString = function () {return a.toString(1) + ".people (stub)"}; i = "disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
                for (h = 0; h < i.length; h++)g(a, i[h]); var j = "set set_once union unset remove delete".split(" "); a.get_group = function () {function b(c) {d[c] = function () {call2_args = arguments; call2 = [c].concat(Array.prototype.slice.call(call2_args, 0)); a.push([e, call2])}} for (var d = {}, e = ["get_group"].concat(Array.prototype.slice.call(arguments, 0)), c = 0; c < j.length; c++)b(j[c]); return d}; b._i.push([e, f, c])
            }; b.__SV = 1.2; e = f.createElement("script"); e.type = "text/javascript"; e.async = !0; e.src = "undefined" !== typeof MIXPANEL_CUSTOM_LIB_URL ?
                MIXPANEL_CUSTOM_LIB_URL : "file:" === f.location.protocol && "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//) ? "https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js" : "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js"; g = f.getElementsByTagName("script")[0]; g.parentNode.insertBefore(e, g)
        }
    })(document, window.mixpanel || []);

    // Enabling the debug mode flag is useful during implementation,
    // but it's recommended you remove it for production
    mixpanel.init('{{ $.Site.Params.mixpanelAnalytics }}', {secure_cookie: true, debug: false});
    mixpanel.track_links('a', 'Click');
    mixpanel.track('Page Viewed', {
        path: "{{ htmlEscape .RelPermalink }}",
        title: "{{ htmlEscape .Title }}",
        category: "{{ htmlEscape .Type }}"
    });
</script>
<!-- Piwik -->
<script type="text/javascript">
    (function (window, document, dataLayerName, id) {
        window[dataLayerName] = window[dataLayerName] || [], window[dataLayerName].push({start: (new Date).getTime(), event: "stg.start"}); var scripts = document.getElementsByTagName('script')[0], tags = document.createElement('script');
        function stgCreateCookie(a, b, c) {var d = ""; if (c) {var e = new Date; e.setTime(e.getTime() + 24 * c * 60 * 60 * 1e3), d = "; expires=" + e.toUTCString()} document.cookie = a + "=" + b + d + "; path=/"}
        var isStgDebug = (window.location.href.match("stg_debug") || document.cookie.match("stg_debug")) && !window.location.href.match("stg_disable_debug"); stgCreateCookie("stg_debug", isStgDebug ? 1 : "", isStgDebug ? 14 : -1);
        var qP = []; dataLayerName !== "dataLayer" && qP.push("data_layer_name=" + dataLayerName), isStgDebug && qP.push("stg_debug"); var qPString = qP.length > 0 ? ("?" + qP.join("&")) : "";
        tags.async = !0, tags.src = "https://{{ $.Site.Params.piwikAnalyticsSubdomain }}.containers.piwik.pro/" + id + ".js" + qPString, scripts.parentNode.insertBefore(tags, scripts);
        !function (a, n, i) {a[n] = a[n] || {}; for (var c = 0; c < i.length; c++)!function (i) {a[n][i] = a[n][i] || {}, a[n][i].api = a[n][i].api || function () {var a = [].slice.call(arguments, 0); "string" == typeof a[0] && window[dataLayerName].push({event: n + "." + i + ":" + a[0], parameters: [].slice.call(arguments, 1)})}}(i[c])}(window, "ppms", ["tm", "cm"]);
    })(window, document, 'dataLayer', '{{ $.Site.Params.piwikAnalyticsSiteID }}');
</script>
<!-- Start of Woopra Code -->
<script>
    !function () {var t, o, c, e = window, n = document, r = arguments, a = "script", i = ["call", "cancelAction", "config", "identify", "push", "track", "trackClick", "trackForm", "update", "visit"], s = function () {var t, o = this, c = function (t) {o[t] = function () {return o._e.push([t].concat(Array.prototype.slice.call(arguments, 0))), o}}; for (o._e = [], t = 0; t < i.length; t++)c(i[t])}; for (e.__woo = e.__woo || {}, t = 0; t < r.length; t++)e.__woo[r[t]] = e[r[t]] = e[r[t]] || new s; (o = n.createElement(a)).async = 1, o.src = "https://static.woopra.com/js/w.js", (c = n.getElementsByTagName(a)[0]).parentNode.insertBefore(o, c)}("woopra");

    woopra.config({
        domain: "{{ $.Site.Params.woopraAnalyticsDomain }}",
        outgoing_tracking: true,
        download_tracking: true,
        click_tracking: true
    });

    woopra.track();
</script>
<!-- End of Woopra Code -->
{{ end }}
